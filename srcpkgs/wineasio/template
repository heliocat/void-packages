# Template file for 'wineasio'
pkgname=wineasio
version=1.0.0
revision=1
build_style=gnu-makefile
_rtaudio_ver=5.1.0
hostmakedepends="unzip wine-tools pkg-config"
makedepends="wine wine-devel jack-devel"
depends="jack"
short_desc="JACK driver for WINE to provide Windows Apps with ASIO support"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-2.0-or-later,  LGPL-2.1-or-later"
homepage="https://sourceforge.net/projects/wineasio"
distfiles="https://github.com/wineasio/wineasio/archive/refs/tags/v${version}.tar.gz
 https://github.com/falkTX/rtaudio/archive/refs/tags/${_rtaudio_ver}.tar.gz"
checksum="6938457947373c3c3411c69a9cd3a6835191a04ec694d477b0ecf59161a98d28
 42242eb0db5902166a38530c242567294510f57be22754cfafe31ed1f35b76bf"

case "$XBPS_TARGET_MACHINE" in
	i686) make_build_target=32 ;;
	x86_64*) make_build_target=64 ;;
esac

post_extract() {
	rmdir rtaudio
	mv "../rtaudio-${_rtaudio_ver}" rtaudio
}

do_install() {
	vinstall build${make_build_target}/wineasio.dll.so 755 usr/lib/wine
	vinstall README.md 644 usr/share/wineasio
}
